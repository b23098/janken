<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Wait Page</title>
  <script>
    async function checkResult() {
      const response = await fetch("/api/result");
      const data = await response.json();
      if (data.active === false) {
        document.getElementById("result").innerHTML =
          "結果: " + data.result + "<br><a href='/janken'>もどる</a>";
      } else {
        setTimeout(checkResult, 2000);
      }
    }
    window.onload = checkResult;
  </script>
</head>

<body>
  <h2 th:text="'Hi ' + ${loginUser}"></h2>
  <p>相手の手を待ってます...</p>
  <div id="result"></div>
</body>

</html>
